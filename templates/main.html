{% extends 'base.html' %}

{% block content %}

  <div class="my-4 col-lg-11 mx-auto bg-light">
      <h3>New tour request form</h3>
      <hr>
      <div class="mb-2 px-auto">
      <form class="row gx-4 gy-3" action="" method="post">
        {% csrf_token %}
      {% for field in form %}
          <div class="form-floating col-md-3">
            {{ field }}
            <label class="px-4" for="{{ field.auto_id }}"> {{ field.label }} </label>
            <i><small style="color:#e70a0a"> {{ field.errors }} </small></i>
          </div>
        {% endfor %}
        {{ form.non_field_errors }}
      </div>
      <div class="px-4 py-3 my-3 text-center">
      <button type="submit" class="btn btn-primary btn-lg">Submit</button>
      </div>
      </form>
      </div>

  <div class="b-example-divider"></div>

  <div class="col-lg-11 mx-auto">


  <h3>Scheduled tours</h3> 
  <hr>
  <input class="form-control" id="myInput" type="text" placeholder="Search..">
  <div class="table-responsive">
    <table class="table table-hover table-sm caption-top">
      
            <tr>
                <th>Tour<br>name</th>
                <th>Requestor<br>name</th>
                <th>Requestor<br>email</th>
                <th>Alternate<br>contact</th>
                <th>Attendees<br>akamai</th>
                <th>Attendees<br>guests</th>
                <th>Nocc<br>required?</th>
                <th>Location</th>
                <th>Date</th>
                <th>Start time<br> <i><small style="color:#9e9e9e">use local time</small></i></th>
                <th>End time <br> <i><small style="color:#9e9e9e">use local time</small></i></th>
                <th>Status</th>
                <th>Nocc Person<br>Assigned?</th>
                <th></th>
            </tr>
          
      {%for tour in tours %}
            <tr {%if tour.status == "Approved" %} class="table-success" {% elif tour.status == "Rejected" %} class="table-danger" {% else %} class="table-warning" {% endif %}>
                <td>{{tour.tour_name}}</td>
                <td>{{tour.requestor_name}}</td>
                <td>{{tour.requestor_email}}</td>
                <td>{{tour.alternate_contact}}</td>
                <td>{{tour.attendees_akamai}}</td>
                <td>{{tour.attendees_guests}}</td>
                <td>{{tour.nocc_required}}</td>
                <td>{{tour.location}}</td>
                <td>{{tour.date}}</td>
                <td>{{tour.start_time}}</td>
                <td>{{tour.end_time}}</td>
                <td>{{tour.status}}</td>
                <td>{{tour.nocc_person_assigned}}</td>
                {% if request.user.is_authenticated %}
                <td><a href="/tour-details/{{tour.id}}">Details</a></td>
                {% endif %}
            </tr>
          
      {% endfor %}

</table>
</div>
</div>


{% endblock %}